<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>POTATO</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/night-owl.css">
</head>
<body>
  <!-- Toolbar -->
  <header class="toolbar">
    <button class="menu-btn" id="menu-btn" title="Menu">&#9776;</button>
    <span class="toolbar-title" id="note-title"></span>
    <div class="toolbar-spacer"></div>
    <button class="sync-btn hidden" id="sync-btn" title="Sincronizar con GitHub">
      <span class="sync-icon">&#8635;</span>
      <span class="sync-label" id="sync-label">Sync</span>
    </button>
    <button class="close-note-btn hidden" id="close-note-btn" title="Cerrar nota">&times;</button>
    <div class="mode-toggle hidden" id="mode-toggle">
      <button class="toggle-btn" data-mode="edit">Edit</button>
      <button class="toggle-btn active" data-mode="read">Read</button>
    </div>
  </header>

  <!-- Dropdown Menu -->
  <div class="menu-dropdown" id="menu-dropdown">
    <div class="menu-item" id="menu-open-vault">
      <span class="menu-icon">&#9707;</span>
      <span>Abrir vault</span>
      <span class="menu-shortcut">Ctrl+O</span>
    </div>
    <div class="menu-item" id="menu-new-note">
      <span class="menu-icon">&#43;</span>
      <span>Nueva nota</span>
      <span class="menu-shortcut">Ctrl+N</span>
    </div>
    <div class="menu-separator"></div>
    <div class="menu-item" id="menu-github">
      <span class="menu-icon">&#8595;</span>
      <span>Clonar repositorio GitHub</span>
    </div>
    <div class="menu-item" id="menu-sync">
      <span class="menu-icon">&#8645;</span>
      <span>Sincronizar</span>
      <span class="menu-shortcut">Ctrl+Shift+S</span>
    </div>
    <div class="menu-item" id="menu-open-folder">
      <span class="menu-icon">&#8599;</span>
      <span>Abrir en explorador</span>
    </div>
    <div class="menu-separator"></div>
    <div class="menu-item" id="menu-settings">
      <span class="menu-icon">&#9675;</span>
      <span>Ajustes</span>
    </div>
  </div>

  <!-- New Note Modal -->
  <div class="modal-overlay" id="newnote-modal">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-title">Nueva nota</span>
        <button class="modal-close" id="newnote-modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="sync-step">
          <div class="sync-step-label">Nombre de la nota:</div>
          <input type="text" class="sync-input" id="newnote-input" placeholder="Mi nueva nota" spellcheck="false" autocomplete="off">
        </div>
      </div>
      <div class="modal-footer">
        <button class="modal-btn secondary" id="newnote-btn-cancel">Cancelar</button>
        <button class="modal-btn primary" id="newnote-btn-action">Crear</button>
      </div>
    </div>
  </div>

  <!-- Clone Modal -->
  <div class="modal-overlay" id="clone-modal">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-title">Clonar repositorio</span>
        <button class="modal-close" id="clone-modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="sync-step">
          <div class="sync-step-label">SSH del repositorio:</div>
          <input type="text" class="sync-input" id="clone-url-input" placeholder="git@github.com:usuario/mi-vault.git" spellcheck="false" autocomplete="off">
          <div class="clone-hint">Copia el SSH desde tu repositorio en GitHub.</div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="modal-btn secondary" id="clone-btn-cancel">Cancelar</button>
        <button class="modal-btn primary" id="clone-btn-action">Clonar</button>
      </div>
    </div>
  </div>

  <!-- Search palette -->
  <div class="search-overlay" id="search-overlay">
    <div class="search-palette">
      <div class="search-input-wrap">
        <span class="search-icon">&#9906;</span>
        <input type="text" class="search-input" id="search-input" placeholder="Buscar notas y contenido..." autocomplete="off" spellcheck="false">
      </div>
      <div class="search-results" id="search-results"></div>
    </div>
  </div>

  <!-- Progress bar -->
  <div class="progress-bar" id="progress-bar">
    <div class="progress-fill" id="progress-fill"></div>
    <span class="progress-text" id="progress-text"></span>
  </div>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-resize" id="sidebar-resize"></div>
    <div class="sidebar-header" id="vault-name">VAULT</div>
    <div class="sidebar-tree" id="file-tree">
      <div class="sidebar-empty">Ctrl+O para abrir un vault</div>
    </div>
  </aside>

  <!-- Content: Editor -->
  <main class="content">
    <textarea
      class="editor"
      id="editor"
      spellcheck="false"
      placeholder="Escribe algo..."
    ></textarea>
    <div class="preview" id="preview"></div>
  </main>

  <!-- Status bar -->
  <footer class="statusbar">
    <span id="status-text">Ctrl+O para abrir un vault</span>
    <span class="statusbar-spacer"></span>
    <span class="statusbar-credit">by JemXiaoLong</span>
  </footer>

  <!-- Sync Modal -->
  <div class="modal-overlay" id="sync-modal">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-title">Sincronizar</span>
        <button class="modal-close" id="sync-modal-close">&times;</button>
      </div>
      <div class="modal-body" id="sync-modal-body">
        <!-- Step 1: Pull status -->
        <div class="sync-step" id="sync-step-pull">
          <div class="sync-step-icon">&#8635;</div>
          <div class="sync-step-text">Descargando cambios...</div>
        </div>
        <!-- Step 2: File list -->
        <div class="sync-step hidden" id="sync-step-files">
          <div class="sync-step-label">Archivos con cambios locales:</div>
          <div class="sync-file-actions">
            <button class="sync-select-btn" id="sync-select-all">Todos</button>
            <button class="sync-select-btn" id="sync-select-none">Ninguno</button>
          </div>
          <div class="sync-file-list" id="sync-file-list"></div>
        </div>
        <!-- Step 3: Commit message -->
        <div class="sync-step hidden" id="sync-step-commit">
          <div class="sync-step-label">Mensaje del commit:</div>
          <input type="text" class="sync-input" id="sync-commit-msg" placeholder="Describe tus cambios...">
        </div>
        <!-- Step 4: Result -->
        <div class="sync-step hidden" id="sync-step-result">
          <div class="sync-step-icon" id="sync-result-icon">&#10003;</div>
          <div class="sync-step-text" id="sync-result-text">Sincronizado</div>
        </div>
      </div>
      <div class="modal-footer" id="sync-modal-footer">
        <button class="modal-btn secondary" id="sync-btn-cancel">Cancelar</button>
        <button class="modal-btn primary" id="sync-btn-action">Continuar</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal (placeholder) -->
  <div class="modal-overlay" id="settings-modal">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-title">Ajustes</span>
        <button class="modal-close" id="settings-modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="settings-soon">
          <div class="settings-soon-icon">&#9675;</div>
          <div class="settings-soon-title">Proximamente</div>
          <div class="settings-soon-list">
            <div class="settings-soon-item">Tema claro / oscuro</div>
            <div class="settings-soon-item">Tamano de fuente</div>
            <div class="settings-soon-item">Auto-guardado</div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="modal-btn primary" id="settings-btn-close">Cerrar</button>
      </div>
    </div>
  </div>

  <!-- Move File Confirmation Modal -->
  <div class="modal-overlay" id="move-modal">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-title">Mover archivo</span>
        <button class="modal-close" id="move-modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="move-confirm-msg">
          <div class="move-confirm-icon">&#8623;</div>
          <div class="move-confirm-text">
            <span>Mover</span>
            <strong id="move-file-name"></strong>
            <span>a la carpeta</span>
            <strong id="move-dest-name"></strong>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="modal-btn secondary" id="move-btn-cancel">Cancelar</button>
        <button class="modal-btn primary" id="move-btn-action">Mover</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/vendor/marked.min.js"></script>
  <script src="js/vendor/highlight.min.js"></script>
  <script src="js/wikilinks.js"></script>
  <script src="js/sidebar.js"></script>
  <script src="js/editor.js"></script>
  <script src="js/preview.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
